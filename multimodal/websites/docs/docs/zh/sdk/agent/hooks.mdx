# Agent Hooks

Agent hooks æä¾›äº†ä¸€ç§å¼ºå¤§çš„æ–¹å¼æ¥æ‰©å±•å’Œè‡ªå®šä¹‰ agent åœ¨æ•´ä¸ªæ‰§è¡Œç”Ÿå‘½å‘¨æœŸä¸­çš„è¡Œä¸ºã€‚`BaseAgent` ç±»æš´éœ²äº†ä¸€å¥—å…¨é¢çš„ hooksï¼Œå…è®¸ä½ æ‹¦æˆªã€ä¿®æ”¹å’Œå“åº” agent æ‰§è¡Œè¿‡ç¨‹ä¸­çš„å„ç§äº‹ä»¶ã€‚

## Hook åˆ†ç±»

Agent hooks æ ¹æ®å…¶ç”¨é€”åˆ†ä¸ºå‡ ä¸ªç±»åˆ«ï¼š

### ç”Ÿå‘½å‘¨æœŸ Hooks

æ§åˆ¶æ•´ä½“çš„ agent ç”Ÿå‘½å‘¨æœŸå’Œæ‰§è¡Œæµç¨‹ã€‚

### LLM äº¤äº’ Hooks

æ‹¦æˆªå’Œä¿®æ”¹ä¸è¯­è¨€æ¨¡å‹çš„äº¤äº’ã€‚

### å·¥å…·æ‰§è¡Œ Hooks

è‡ªå®šä¹‰å·¥å…·è°ƒç”¨è¡Œä¸ºå¹¶å¤„ç†å·¥å…·æ‰§è¡Œäº‹ä»¶ã€‚

### å¾ªç¯æ§åˆ¶ Hooks

ç®¡ç† agent çš„æ¨ç†å¾ªç¯å’Œç»ˆæ­¢æ¡ä»¶ã€‚

## ç”Ÿå‘½å‘¨æœŸ Hooks

### `initialize()`

åœ¨ agent åˆå§‹åŒ–æœŸé—´è°ƒç”¨ï¼Œç”¨äºæ‰§è¡Œè®¾ç½®æ“ä½œã€‚

```ts
class CustomAgent extends BaseAgent {
  async initialize(): Promise<void> {
    // æ‰§è¡Œè€—æ—¶çš„è®¾ç½®æ“ä½œ
    await this.connectToDatabase();
    await this.loadConfiguration();
    console.log('Agent åˆå§‹åŒ–æˆåŠŸ');
  }
}
```

### `onDispose()`

åœ¨ agent é”€æ¯æœŸé—´è°ƒç”¨ï¼Œç”¨äºæ¸…ç†èµ„æºã€‚

```ts
class CustomAgent extends BaseAgent {
  protected async onDispose(): Promise<void> {
    // æ¸…ç†èµ„æº
    await this.closeConnections();
    this.clearTimers();
    console.log('Agent é”€æ¯æˆåŠŸ');
  }
}
```

## LLM äº¤äº’ Hooks

### `onLLMRequest()`

åœ¨å‘ LLM å‘é€è¯·æ±‚ä¹‹å‰è§¦å‘ï¼Œå…è®¸ä½ æ£€æŸ¥æˆ–è®°å½•è¯·æ±‚è´Ÿè½½ã€‚

```ts
class CustomAgent extends BaseAgent {
  async onLLMRequest(id: string, payload: LLMRequestHookPayload): Promise<void> {
    console.log(`å‘ LLM å‘é€è¯·æ±‚ï¼Œä¼šè¯ ${id}`);
    console.log(`æ¨¡å‹: ${payload.model}`);
    console.log(`æ¶ˆæ¯æ•°: ${payload.messages.length}`);
    
    // è®°å½• token ä½¿ç”¨æƒ…å†µä»¥è¿›è¡Œç›‘æ§
    this.logTokenUsage(payload);
  }
}
```

### `onLLMResponse()`

åœ¨ä» LLM æ¥æ”¶å“åº”åè§¦å‘ï¼Œå…è®¸ä½ å¤„ç†å“åº”ã€‚

```ts
class CustomAgent extends BaseAgent {
  async onLLMResponse(id: string, payload: LLMResponseHookPayload): Promise<void> {
    console.log(`æ”¶åˆ°ä¼šè¯ ${id} çš„å“åº”`);
    
    // è·Ÿè¸ªå“åº”æŒ‡æ ‡
    this.trackResponseTime(payload.elapsedMs);
    this.trackTokenUsage(payload.usage);
    
    // è‡ªå®šä¹‰å“åº”å¤„ç†
    if (payload.response.choices[0]?.finish_reason === 'length') {
      console.warn('å“åº”å› é•¿åº¦é™åˆ¶è¢«æˆªæ–­');
    }
  }
}
```

### `onLLMStreamingResponse()`

ä¸ºæ¥è‡ª LLM çš„æµå¼å“åº”è§¦å‘ã€‚

```ts
class CustomAgent extends BaseAgent {
  onLLMStreamingResponse(id: string, payload: LLMStreamingResponseHookPayload): void {
    // å¤„ç†æµå¼å—
    console.log(`ä¼šè¯ ${id} çš„æµå¼å—: ${payload.chunk}`);
    
    // æ›´æ–° UI æˆ–å‘é€å®æ—¶æ›´æ–°
    this.updateStreamingUI(payload.chunk);
  }
}
```

## å·¥å…·æ‰§è¡Œ Hooks

### `onBeforeToolCall()`

åœ¨æ‰§è¡Œå·¥å…·ä¹‹å‰è°ƒç”¨ï¼Œå…è®¸ä½ ä¿®æ”¹å‚æ•°æˆ–æ·»åŠ éªŒè¯ã€‚

```ts
class CustomAgent extends BaseAgent {
  async onBeforeToolCall(
    id: string,
    toolCall: { toolCallId: string; name: string },
    args: any
  ): Promise<any> {
    console.log(`æ‰§è¡Œå·¥å…·: ${toolCall.name}`);
    
    // æ·»åŠ éªŒè¯
    if (toolCall.name === 'fileOperation' && !this.hasFilePermission()) {
      throw new Error('æ–‡ä»¶æ“ä½œæƒé™ä¸è¶³');
    }
    
    // ä¿®æ”¹å‚æ•°
    if (toolCall.name === 'searchWeb') {
      args.maxResults = Math.min(args.maxResults || 10, 5);
    }
    
    return args;
  }
}
```

### `onAfterToolCall()`

åœ¨æ‰§è¡Œå·¥å…·ä¹‹åè°ƒç”¨ï¼Œå…è®¸ä½ ä¿®æ”¹ç»“æœæˆ–æ·»åŠ åå¤„ç†ã€‚

```ts
class CustomAgent extends BaseAgent {
  async onAfterToolCall(
    id: string,
    toolCall: { toolCallId: string; name: string },
    result: any
  ): Promise<any> {
    console.log(`å·¥å…· ${toolCall.name} æ‰§è¡Œå®Œæˆ`);
    
    // åå¤„ç†ç»“æœ
    if (toolCall.name === 'imageAnalysis') {
      result.confidence = this.calculateConfidence(result);
    }
    
    // è®°å½•å·¥å…·ä½¿ç”¨æƒ…å†µ
    this.logToolUsage(toolCall.name, result);
    
    return result;
  }
}
```

### `onToolCallError()`

å½“å·¥å…·æ‰§è¡Œå¯¼è‡´é”™è¯¯æ—¶è°ƒç”¨ï¼Œå…è®¸ä½ å¤„ç†æˆ–è½¬æ¢é”™è¯¯ã€‚

```ts
class CustomAgent extends BaseAgent {
  async onToolCallError(
    id: string,
    toolCall: { toolCallId: string; name: string },
    error: any
  ): Promise<any> {
    console.error(`å·¥å…· ${toolCall.name} æ‰§è¡Œå¤±è´¥:`, error);
    
    // æä¾›å¤‡ç”¨å“åº”
    if (toolCall.name === 'weatherAPI') {
      return 'å¤©æ°”ä¿¡æ¯å½“å‰ä¸å¯ç”¨ï¼Œè¯·ç¨åé‡è¯•ã€‚';
    }
    
    // è½¬æ¢é”™è¯¯æ¶ˆæ¯
    if (error.code === 'RATE_LIMIT') {
      return 'æœåŠ¡æš‚æ—¶ç¹å¿™ï¼Œè¯·ç¨ç­‰ç‰‡åˆ»åé‡è¯•ã€‚';
    }
    
    return `é”™è¯¯: ${error.message || error}`;
  }
}
```

### `onProcessToolCalls()`

æ‹¦æˆªå·¥å…·è°ƒç”¨å¤„ç†ï¼Œå¯¹æµ‹è¯•å’Œæ¨¡æ‹Ÿè‡³å…³é‡è¦ã€‚

```ts
class TestAgent extends BaseAgent {
  onProcessToolCalls(
    id: string,
    toolCalls: ChatCompletionMessageToolCall[]
  ): ToolCallResult[] | undefined {
    // ä¸ºæµ‹è¯•æ¨¡æ‹Ÿå·¥å…·è°ƒç”¨
    if (this.isTestMode) {
      return toolCalls.map(call => ({
        toolCallId: call.id,
        content: this.getMockResult(call.function.name),
      }));
    }
    
    // è¿”å› undefined è¿›è¡Œæ­£å¸¸æ‰§è¡Œ
    return undefined;
  }
}
```

## å¾ªç¯æ§åˆ¶ Hooks

### `onEachAgentLoopStart()`

åœ¨æ¯ä¸ª agent å¾ªç¯è¿­ä»£å¼€å§‹æ—¶è°ƒç”¨ã€‚

```ts
class CustomAgent extends BaseAgent {
  async onEachAgentLoopStart(sessionId: string): Promise<void> {
    console.log(`å¼€å§‹ä¼šè¯ ${sessionId} çš„ç¬¬ ${this.getCurrentLoopIteration()} æ¬¡å¾ªç¯è¿­ä»£`);
    
    // æ³¨å…¥åŠ¨æ€ä¸Šä¸‹æ–‡
    this.updateContextForIteration();
    
    // æ£€æŸ¥èµ„æºé™åˆ¶
    if (this.getCurrentLoopIteration() > this.maxIterations * 0.8) {
      console.warn('æ¥è¿‘æœ€å¤§è¿­ä»£é™åˆ¶');
    }
  }
}
```

### `onEachAgentLoopEnd()`

åœ¨æ¯ä¸ª agent å¾ªç¯è¿­ä»£ç»“æŸæ—¶è°ƒç”¨ã€‚

```ts
class CustomAgent extends BaseAgent {
  async onEachAgentLoopEnd(context: EachAgentLoopEndContext): Promise<void> {
    console.log(`å®Œæˆä¼šè¯ ${context.sessionId} çš„ç¬¬ ${context.iteration} æ¬¡è¿­ä»£`);
    
    // è®°å½•è¿­ä»£æŒ‡æ ‡
    this.logIterationMetrics(context);
    
    // æ£€æŸ¥æ˜¯å¦åº”è¯¥ç»§ç»­
    if (this.shouldTerminateEarly(context)) {
      this.requestLoopTermination();
    }
  }
}
```

### `onAgentLoopEnd()`

å½“æ•´ä¸ª agent å¾ªç¯å®Œæˆæ—¶è°ƒç”¨ã€‚

```ts
class CustomAgent extends BaseAgent {
  async onAgentLoopEnd(id: string): Promise<void> {
    console.log(`ä¼šè¯ ${id} çš„ agent å¾ªç¯å®Œæˆ`);
    
    // æ¸…ç†ä¼šè¯èµ„æº
    this.cleanupSession(id);
    
    // å‘é€å®Œæˆé€šçŸ¥
    await this.notifyCompletion(id);
  }
}
```

### `onBeforeLoopTermination()`

åœ¨ agent å¾ªç¯ç»ˆæ­¢ä¹‹å‰è°ƒç”¨ï¼Œå…è®¸ä½ æ§åˆ¶ç»ˆæ­¢æ¡ä»¶ã€‚

```ts
class CustomAgent extends BaseAgent {
  onBeforeLoopTermination(
    id: string,
    finalEvent: AgentEventStream.AssistantMessageEvent
  ): LoopTerminationCheckResult {
    // ç¡®ä¿è°ƒç”¨äº†ç‰¹å®šå·¥å…·
    const requiredTools = ['validateResult', 'saveToDatabase'];
    const calledTools = this.getCalledToolsInSession(id);
    
    const allRequiredToolsCalled = requiredTools.every(tool => 
      calledTools.includes(tool)
    );
    
    if (!allRequiredToolsCalled) {
      console.log('æœªè°ƒç”¨å¿…éœ€å·¥å…·ï¼Œç»§ç»­å¾ªç¯');
      return { finished: false };
    }
    
    // æ£€æŸ¥å“åº”è´¨é‡
    if (finalEvent.content.length < 50) {
      console.log('å“åº”è¿‡çŸ­ï¼Œè¯·æ±‚æ›´å¤šè¯¦ç»†ä¿¡æ¯');
      return { finished: false };
    }
    
    return { finished: true };
  }
}
```

## è¯·æ±‚å‡†å¤‡ Hooks

### `onPrepareRequest()`

åœ¨å‡†å¤‡ LLM è¯·æ±‚ä¹‹å‰è°ƒç”¨ï¼Œå…è®¸åŠ¨æ€ä¿®æ”¹ç³»ç»Ÿæç¤ºå’Œå·¥å…·ã€‚

```ts
class CustomAgent extends BaseAgent {
  onPrepareRequest(context: PrepareRequestContext): PrepareRequestResult {
    let { systemPrompt, tools } = context;
    
    // æ ¹æ®ä¸Šä¸‹æ–‡ä¿®æ”¹ç³»ç»Ÿæç¤º
    if (context.iteration > 3) {
      systemPrompt += '\n\næ³¨æ„ï¼šä½ ç°åœ¨åœ¨ç¬¬ ' + context.iteration + 
        ' æ¬¡è¿­ä»£ä¸­ã€‚è¯·ä¸“æ³¨äºæä¾›ç®€æ´çš„æœ€ç»ˆç­”æ¡ˆã€‚';
    }
    
    // æ ¹æ®å½“å‰çŠ¶æ€è¿‡æ»¤å·¥å…·
    const filteredTools = tools.filter(tool => {
      // åœ¨åæœŸè¿­ä»£ä¸­ç¦ç”¨æ˜‚è´µçš„å·¥å…·
      if (context.iteration > 5 && tool.name.includes('search')) {
        return false;
      }
      return true;
    });
    
    return {
      systemPrompt,
      tools: filteredTools,
    };
  }
}
```

### `onRetrieveTools()` (å·²å¼ƒç”¨)

> **æ³¨æ„**: æ­¤ hook å·²å¼ƒç”¨ã€‚è¯·ä½¿ç”¨ `onPrepareRequest()` è¿›è¡Œæ›´å…¨é¢çš„è¯·æ±‚å‡†å¤‡ã€‚

```ts
class CustomAgent extends BaseAgent {
  onRetrieveTools(tools: Tool[]): Tool[] {
    // æ ¹æ® agent çŠ¶æ€è¿‡æ»¤å·¥å…·
    return tools.filter(tool => {
      if (tool.name === 'dangerousOperation' && !this.isAdminMode) {
        return false;
      }
      return true;
    });
  }
}
```

## ç»ˆæ­¢æ§åˆ¶

### `requestLoopTermination()`

ä» hooks å†…éƒ¨ä»¥ç¼–ç¨‹æ–¹å¼è¯·æ±‚å¾ªç¯ç»ˆæ­¢ã€‚

```ts
class CustomAgent extends BaseAgent {
  async onAfterToolCall(
    id: string,
    toolCall: { toolCallId: string; name: string },
    result: any
  ): Promise<any> {
    // å¦‚æœæ‰¾åˆ°ç¡®å®šç­”æ¡ˆåˆ™ç»ˆæ­¢
    if (toolCall.name === 'factChecker' && result.confidence > 0.95) {
      console.log('æ‰¾åˆ°é«˜ç½®ä¿¡åº¦ç»“æœï¼Œç»ˆæ­¢å¾ªç¯');
      this.requestLoopTermination();
    }
    
    return result;
  }
}
```

## å®Œæ•´ç¤ºä¾‹

è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºå¤šä¸ª hooks ååŒå·¥ä½œçš„å®Œæ•´ç¤ºä¾‹ï¼š

```ts
import { BaseAgent, Agent, Tool, z } from '@tarko/agent';

class MonitoredAgent extends BaseAgent {
  private sessionMetrics = new Map();
  private toolUsageCount = new Map();
  
  async initialize(): Promise<void> {
    console.log('ğŸš€ Agent åˆå§‹åŒ–ä¸­...');
    await this.setupMonitoring();
  }
  
  async onLLMRequest(id: string, payload: LLMRequestHookPayload): Promise<void> {
    const metrics = this.getSessionMetrics(id);
    metrics.llmRequests++;
    metrics.totalTokensSent += this.estimateTokens(payload.messages);
  }
  
  async onLLMResponse(id: string, payload: LLMResponseHookPayload): Promise<void> {
    const metrics = this.getSessionMetrics(id);
    metrics.totalTokensReceived += payload.usage?.total_tokens || 0;
    metrics.totalCost += this.calculateCost(payload.usage);
  }
  
  async onBeforeToolCall(
    id: string,
    toolCall: { toolCallId: string; name: string },
    args: any
  ): Promise<any> {
    // è·Ÿè¸ªå·¥å…·ä½¿ç”¨æƒ…å†µ
    const count = this.toolUsageCount.get(toolCall.name) || 0;
    this.toolUsageCount.set(toolCall.name, count + 1);
    
    // é€Ÿç‡é™åˆ¶
    if (count > 10) {
      throw new Error(`å·¥å…· ${toolCall.name} å·²è¶…è¿‡ä½¿ç”¨é™åˆ¶`);
    }
    
    return args;
  }
  
  async onEachAgentLoopEnd(context: EachAgentLoopEndContext): Promise<void> {
    const metrics = this.getSessionMetrics(context.sessionId);
    
    // å¦‚æœæˆæœ¬è¶…è¿‡é¢„ç®—åˆ™è‡ªåŠ¨ç»ˆæ­¢
    if (metrics.totalCost > 1.0) {
      console.warn('ğŸ’° æˆæœ¬é™åˆ¶è¶…å‡ºï¼Œç»ˆæ­¢å¾ªç¯');
      this.requestLoopTermination();
    }
  }
  
  onBeforeLoopTermination(
    id: string,
    finalEvent: AgentEventStream.AssistantMessageEvent
  ): LoopTerminationCheckResult {
    // ç¡®ä¿å“åº”ç¬¦åˆè´¨é‡æ ‡å‡†
    const hasCodeExample = finalEvent.content.includes('```');
    const hasExplanation = finalEvent.content.length > 100;
    
    if (!hasCodeExample || !hasExplanation) {
      return { finished: false };
    }
    
    return { finished: true };
  }
  
  async onAgentLoopEnd(id: string): Promise<void> {
    const metrics = this.getSessionMetrics(id);
    console.log('ğŸ“Š ä¼šè¯å®Œæˆ:', {
      sessionId: id,
      iterations: metrics.iterations,
      totalCost: metrics.totalCost,
      toolsUsed: Array.from(this.toolUsageCount.keys()),
    });
  }
  
  protected async onDispose(): Promise<void> {
    console.log('ğŸ§¹ æ¸…ç†ç›‘æ§èµ„æº');
    this.sessionMetrics.clear();
    this.toolUsageCount.clear();
  }
  
  private getSessionMetrics(sessionId: string) {
    if (!this.sessionMetrics.has(sessionId)) {
      this.sessionMetrics.set(sessionId, {
        llmRequests: 0,
        totalTokensSent: 0,
        totalTokensReceived: 0,
        totalCost: 0,
        iterations: 0,
      });
    }
    return this.sessionMetrics.get(sessionId);
  }
  
  private async setupMonitoring(): Promise<void> {
    // è®¾ç½®ç›‘æ§åŸºç¡€è®¾æ–½
  }
  
  private estimateTokens(messages: any[]): number {
    // ç®€å•çš„ token ä¼°ç®—
    return JSON.stringify(messages).length / 4;
  }
  
  private calculateCost(usage: any): number {
    // æ ¹æ® token ä½¿ç”¨æƒ…å†µè®¡ç®—æˆæœ¬
    return (usage?.total_tokens || 0) * 0.0001;
  }
}

// ä½¿ç”¨æ–¹æ³•
const agent = new Agent({
  tools: [/* ä½ çš„å·¥å…· */],
});

// åº”ç”¨ç›‘æ§ agent è¡Œä¸º
Object.setPrototypeOf(agent, MonitoredAgent.prototype);
MonitoredAgent.call(agent, agent.getOptions());

// ç°åœ¨ä½ çš„ agent å…·æœ‰ç›‘æ§èƒ½åŠ›
const response = await agent.run('è§£é‡Šå¦‚ä½•ä½¿ç”¨ React hooks');
```

## æœ€ä½³å®è·µ

### æ€§èƒ½è€ƒè™‘

- ä¿æŒ hook å®ç°è½»é‡çº§ï¼Œé¿å…å½±å“ agent æ€§èƒ½
- ä»…åœ¨å¿…è¦çš„ I/O æ“ä½œæ—¶ä½¿ç”¨å¼‚æ­¥ hooks
- é¿å…åœ¨é¢‘ç¹è°ƒç”¨çš„ hooksï¼ˆå¦‚ `onLLMStreamingResponse()`ï¼‰ä¸­è¿›è¡Œé‡è®¡ç®—

### é”™è¯¯å¤„ç†

- åœ¨ hooks ä¸­ä¼˜é›…åœ°å¤„ç†é”™è¯¯ï¼Œé˜²æ­¢ agent å´©æºƒ
- ä¸ºå¯èƒ½å¤±è´¥çš„æ“ä½œä½¿ç”¨ try-catch å—
- å½“ hooks é‡åˆ°é”™è¯¯æ—¶æä¾›æœ‰æ„ä¹‰çš„å¤‡ç”¨è¡Œä¸º

### çŠ¶æ€ç®¡ç†

- ä½¿ç”¨ä¼šè¯ ID ä½œä¸ºé”®å­˜å‚¨ç‰¹å®šäºä¼šè¯çš„æ•°æ®
- åœ¨ `onAgentLoopEnd()` ä¸­æ¸…ç†ä¼šè¯æ•°æ®ä»¥é˜²æ­¢å†…å­˜æ³„æ¼
- ä½¿ç”¨ `onDispose()` è¿›è¡Œ agent é”€æ¯æ—¶çš„æœ€ç»ˆæ¸…ç†

### æµ‹è¯•

- ä½¿ç”¨ `onProcessToolCalls()` åœ¨æµ‹è¯•ä¸­æ¨¡æ‹Ÿå·¥å…·æ‰§è¡Œ
- åˆ›å»ºç‰¹å®šäºæµ‹è¯•çš„ agent ç±»ï¼Œä¸ºæµ‹è¯•åœºæ™¯é‡å†™ hooks
- ä¸ºè‡ªå®šä¹‰ agent å®ç°éªŒè¯ hook è¡Œä¸ºçš„å•å…ƒæµ‹è¯•

## Hook æ‰§è¡Œé¡ºåº

äº†è§£ hook æ‰§è¡Œé¡ºåºæœ‰åŠ©äºè®¾è®¡æœ‰æ•ˆçš„ agent è¡Œä¸ºï¼š

1. `initialize()` - agent è®¾ç½®æœŸé—´æ‰§è¡Œä¸€æ¬¡
2. `onEachAgentLoopStart()` - æ¯æ¬¡è¿­ä»£å¼€å§‹
3. `onPrepareRequest()` - å‡†å¤‡ LLM è¯·æ±‚ä¹‹å‰
4. `onLLMRequest()` - å‘é€åˆ° LLM ä¹‹å‰
5. `onLLMResponse()` / `onLLMStreamingResponse()` - LLM å“åº”ä¹‹å
6. `onProcessToolCalls()` - å·¥å…·æ‰§è¡Œä¹‹å‰ï¼ˆå¦‚æœè°ƒç”¨äº†å·¥å…·ï¼‰
7. `onBeforeToolCall()` - æ¯ä¸ªå•ç‹¬å·¥å…·ä¹‹å‰
8. å·¥å…·æ‰§è¡Œ
9. `onAfterToolCall()` / `onToolCallError()` - æ¯ä¸ªå·¥å…·ä¹‹å
10. `onEachAgentLoopEnd()` - æ¯æ¬¡è¿­ä»£ç»“æŸ
11. `onBeforeLoopTermination()` - æœ€ç»ˆç»ˆæ­¢æ£€æŸ¥ä¹‹å‰
12. `onAgentLoopEnd()` - å¾ªç¯å®Œæˆæ—¶
13. `onDispose()` - agent æ¸…ç†æœŸé—´

è¿™ä¸ªæ‰§è¡Œé¡ºåºç¡®ä¿ä½ å¯ä»¥åœ¨æ‰§è¡Œç”Ÿå‘½å‘¨æœŸçš„æ¯ä¸ªå…³é”®ç‚¹æ‹¦æˆªå’Œä¿®æ”¹ agent è¡Œä¸ºã€‚
